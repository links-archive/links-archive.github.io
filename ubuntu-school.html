<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Archive: Android</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Raleway:400,300,600">
    <link rel="stylesheet" type="text/css" href="files/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="files/css/skeleton.css">
    <link rel="icon" type="image/svg" href="files/favicon.svg">
</head>
<body>
    <div class="container">
        <div class="row">
            <section class="header">
                <h1>Archive</h1>
                <h2 id="title"></h2>
            </section>

            <hr>

            <select class="u-full-width" onchange="location = this.value;" id="navi"></select>

            <h3>Переводим компьютерный класс на Ubuntu</h3>
            <p>Раскладка такая: 1 – учительский, 1 – сервер, 10 – ученических. Прежде, чем устанавливать ОС на все ПК, надо установить и настроить сервер. Я буду описывать в том порядке, как сам все делал. На тот момент я и не представлял, что из этого выйдет.</p>
            <p>Итак, скачал Ubuntu Server Edition. Дистрибутив умещается на cd. Записал на cd, установил. И… тут меня – новичка в линукс – ждал сюрприз: сервер Ubuntu без графической оболочки. Сейчас, конечно, я смогу работать и в таком режиме, но не тогда: все-таки я был еще привязан к «мышке» и не владел подавляющим большинством консольных команд. Поэтому для меня на тот момент этот вариант не подошел.</p>
            <h3>Устанавливаем сервер</h3>
            <p>Пошел в интернет, погуглил, нашел сайт http://www.zentyal.com/, почитал. Насколько я понял (в английском не очень ведь), дитстрибутив основан на Ubuntu (важно!!!), все компоненты устанавливаются пакетами, уже настроенными на взаимодействие. Так что решил – попробую его. Установка прошла в автоматическом стандартном для Ubuntu режиме. После установки основной среды предлагается установить несколько пакетов, обеспечивающих различный функционал. Можно выбрать один, или несколько, или вообще все установить. После несложных действий по просмотру меню, включения нужных и выключения ненужных функций, и внесения нескольких параметров сеть работает: ip-адреса раздаются, интернет работает, папки расшариваются.</p>
            <h3>Компьютер учителя</h3>
            <p>На свой компьютер я установил Ubuntu Desktop. Установка прошла почти автоматом, без проблем.</p>
            <pre>
                sudo apt-get update
                sudo apt-get install scratch blender italc-master gimp
            </pre>
            <p>и т.д... Своему компьютеру дал ip-адрес 192.168.0.100 в локальной сети. Теперь настраиваем локальный репозиторий.</p>
            <h3>Создаем локальный репозиторий</h3>
            <p>Прежде, чем устанавливать приложения на компьютеры учеников, надо в сети создать и настроить локальный репозиторий. Это для того, чтобы не приходилось на каждый ПК качать установочные пакеты и обновления источников приложений из интернета. При установке всех необходимых приложений на один ПК, установочные пакеты сохранятся в нашем локальном репозитории и при установке на следующий ПК будут скачиваться уже не из интернета, а с этого самого локального репозитория на сервере. Для организации локального репозитория будем использовать apt-cacher. Репозиторий я делал на своем учительском ПК с ip 192.168.0.100. Устанавливаем apt-cacher:</p>
            <pre>
                sudo apt-get update
                sudo apt-get install apt-cacher
            </pre>
            Откроем конфигурационный файл /etc/apt-cacher/apt-cacher.conf
            <pre>
                sudo nano /etc/apt-cacher/apt-cacher.conf
            </pre>
            и изменим в нем одну строку:
            <pre>
                # Разрешаем нужные адреса.
                allowed_hosts=192.168.0.0/24, 127.0.0.1
            </pre>
            <p>Теперь настроим, чтобы apt-cacher запускался автоматически. Для этого откроем файл /etc/default/apt-cacher</p>
            <pre>
                sudo nano /etc/default/apt-cacher
            </pre>
            <p>и изменим значение переменной AUTOSTART:</p>
            <pre>
                AUTOSTART=1
            </pre>
            <p>Перенесем в кеш apt-cacher уже установленные приложения</p>
            <pre>
                sudo /usr/share/apt-cacher/apt-cacher-import.pl /var/cache/apt/archives –r
            </pre>
            <p>Чтобы применить все изменения, перезапустим apt-cacher</p>
            <pre>
                sudo /etc/init.d/apt-cacher restart
            </pre>
            <h3>Компьютеры учеников</h3>
            <p>Записал дистрибутив на несколько cd-дисков. Установка прошла спокойно, без проблем. Так как в сети у меня уже работал dhcp-сервер, то все ученические компьютеры автоматически получали ip-адреса и были готовы к работе в сети. Теперь мне предстояло установить необходимый софт. Действовал на таком уровне, на каком на тот момент соображал в Линуксе. В общем, дело было так. Написал простенький скрипт, файл скинул на флешку и с этой флешкой прошелся по компьютерам. Скрипт запускал и он быстренько все выполнял. Итак, по-порядку. Сначала скинул ключи <a href=http://italc.sourceforge.net/">ITALC</a> на флешку. Для этого на флешке создаю папку clients. В нее копирую ключи программы iTALC: папку /etc/italc/keys/public Теперь в любом текстовом редакторе (например, gedit) пишем скрипт:</p>
            <pre>
                #! /bin/sh
                sudo echo ‘Acquire::http::Proxy «http://192.168.0.100:3142/»;’>>/etc/apt/apt.conf
                sudo apt-get update
                sudo apt-get install scratch blender italc-client gimp inkscape kturtle audacity
                sudo cp /media/flash/clients/public/* /etc/italc/keys
            </pre>
            <p>Примечания:</p>
            <ul>
                <li>первая строчка для настройки локального репозитория, находящегося на учительском компьютере.</li>
                <li>в третьей строке перечисляйте весь софт, который вам надо установить.</li>
                <li>в четвертой строке копируются публичные ключи программы iTALC, необходимые для подключения сервера к клиентам.</li>
            </ul>
            <p>Сохраняем этот файл script.sh. На ученических ПК запускаем его в консоли:</p>
            <pre>
                cd /media/flash/clients
                sh script.sh
            </pre>
            <p>/media/flash – это индентификатор флешки в системе, у вас вместо слова flash будет что-то другое, например, что-то такое FG5FG-JH65T</p>
            <h3>Настраиваем прокси-сервер и контент-фильтр</h3>
            <p>Одной из основных задач сервера является организация общего доступа в Интернет. В школе при этом сервер должен еще и фильтровать интернет-трафик. Я не буду описывать весь этот процесс, т.к. нашел очень полезный ресурс, который необходимо почитать всем начинающим администраторам сервера Ubuntu, – это <a href="http://interface31.ru/tech_it/">Записки IT специалиста</a>. Вот статьи по теме (читаем и делаем в указанном порядке):</p>
            <ul>
                <li><a href="http://interface31.ru/tech_it/2009/11/linux-nastrojka-routera-nat-dhcp-squid.html">Настройка роутера (NAT + DHCP + Squid)</a></li>
                <li><a href="http://interface31.ru/tech_it/2010/03/ubuntu-server-nastraivaem-kontent-fil-tr-routera-dansguardian.html">Настраиваем контент-фильтр роутера (DansGuardian)</a></li>
                <li><a href="http://interface31.ru/tech_it/2010/06/ubuntu-server-nastraivaem-antivirusnyj-fil-tr-routera-clamav.html">Настраиваем антивирусный фильтр роутера (ClamAV)</a></li>
                <li><a href="http://interface31.ru/tech_it/2010/07/ubuntu-server-dopolnyaem-kontent-filtr-routera-antivirusom-dansguardian-clamav.html">Дополняем контент-фильтр роутера антивирусом (DansGuardian + ClamAV)</a></li>
            </ul>
            <p>Выполняя настройки, не забывайте какой интерфейс у вас смотрит в интернет, а какой в локальную сеть – eth0 или eth1. Так же не забывайте про ip-адресацию в локальной сети: у меня адреса 192.168.0.1 – 192.168.0.254 (или 192.168.0.0/255.255.255.0 или 192.168.0.0/24).</p>
            <p>Автор Афонин Сергей, <a href="https://help.ubuntu.ru/wiki/%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D0%BC_%D0%BA%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D1%8B%D0%B9_%D0%BA%D0%BB%D0%B0%D1%81%D1%81_%D0%BD%D0%B0_linux_%D0%B7%D0%B0_3_%D0%B4%D0%BD%D1%8F">источник</a></p>
        </div>
    </div>
    <script src="files/js/base.js"></script>    
</body>
</html>